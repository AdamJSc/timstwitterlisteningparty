var timeout,counter=0,startms=(new Date).getTime(),mssofar=0,delaysofar=0,timeOfNextTweet=0,paused=!1,pausedTime=0;function loadFeed(e){location.href="../snippets/replay/feed_"+e+"_snippet.html"}function playPause(){if(paused){var e=(new Date).getTime();paused=!1,document.getElementById("playpause").innerHTML='<img src="../img/pause.png">',document.getElementById("advance").style.display="block";var t=e-pausedTime;startms+=t,timeOfNextTweet+=t,timeout=setTimeout("showIt()",timeOfNextTweet-e)}else paused=!0,document.getElementById("playpause").innerHTML='<img src="../img/play.png">',document.getElementById("advance").style.display="none",pausedTime=(new Date).getTime(),clearTimeout(timeout)}function advance(){clearTimeout(timeout);var e=(new Date).getTime();startms-=timeOfNextTweet-e,timeOfNextTweet=e,showIt()}function showIt(){mssofar=(new Date).getTime()-startms;var e=document.getElementById("div"+counter);if(4===counter){var t=document.getElementById("users-panel");$(t).slideUp("slow")}if(null!==e){for(var n=Number(document.getElementById("div"+counter).getAttribute("data-delay"));delaysofar+n<=mssofar&&null!==e;){var a=document.getElementById("div"+counter).getAttribute("data-url");if(delaysofar+=n,null!==a){var m=counter,i=e;$.ajax({type:"GET",url:"https://publish.twitter.com/oembed?url="+a,dataType:"jsonp",success:function(e){$("#div"+m).html(e.html),$(i).slideDown("slow")}})}if(counter++,null!==(e=document.getElementById("div"+counter)))n=Number(document.getElementById("div"+counter).getAttribute("data-delay"));else{var o=document.getElementById("div"+(counter-1));$(o).slideDown("slow");var s=document.getElementById("timer-div");$(s).slideUp("slow")}}if(null!==e){mssofar=(new Date).getTime()-startms;var u=delaysofar+n-mssofar;u<0&&(u=1),timeout=setTimeout("showIt()",u),timeOfNextTweet=(new Date).getTime()+u;var d=setInterval(function(){if(paused)document.getElementById("timer").innerHTML="Paused";else{var e=timeOfNextTweet-(new Date).getTime(),t=Math.floor(e/1e3);document.getElementById("timer").innerHTML="Next tweet in "+t+" seconds",t<1&&(clearInterval(d),document.getElementById("timer").innerHTML="Next tweet coming up...")}},1e3)}}}timeout=setTimeout("showIt()",300);
